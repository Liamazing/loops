<!DOCTYPE html>
<html>
	<head>
		<!-- Link Stylesheet -->
		<link rel="stylesheet" type="text/css" href="loopcss.css">
		<!-- Include JQuery -->
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js" type="text/javascript"></script>
		<title>
			Loops.
		</title>
	</head>
	<body>
		<div id="header"></div>
		<div id="main"></div>
	</body>
</html>
<script type="text/javascript">
	var bpm = 100;
	var numBeats = 8;
	var windowWidth = $( window ).width();
	var noteNames = ["C5", "B4", "A4", "G4", "F4", "E4", "D4", "C4"];
	var playNotes = new Array();
	var beatcss = "background-color: #DEDEDE;" +
								"width: " + Math.round(windowWidth / 20) + "px;" +
								"border-radius: 8px;" +
								"margin: " + Math.round(windowWidth / 75) + "px;" +
								"padding: 2px;" +
								"display: inline-block;" +
								"text-align: center;";
								
	/*var notecss = "display: block;" +
								"position: relative";*/
	
	initialize();
	drawPlay();
	
	// Enum for state https://stackoverflow.com/questions/287903/what-is-the-preferred-syntax-for-defining-enums-in-javascript
	var state = {
		PLAY : {value: 0, name: "Play", code: "p"},
		NEWUSER : {value: 1, name: "New User", code: "n"},
		LOGIN : {value: 2, name: "Log In", code: "l"},
		PROFILE : {value: 3, name: "Profile", code: "u"}
	}
	
	function initialize() {
		document.body.style.cssText = "background-color: #343434";
		for(i = 0; i < numBeats; i ++) {
			playNotes[i] = new Array();
			for(j = 0; j < noteNames.length; j ++) {
				playNotes[i][j] = false;
			}
		}
	}
	
	function clearMain () {
		var main = document.getElementById("main");
		while(main.hasChildNodes()) {
			main.removeChild(main.firstChild);
		}
	}
	
	function drawPlay () {
		var beatsBody = document.createElement('div');
		beatsBody.id = "beats";
		beatsBody.style.cssText = "background-color: #ACACAC;" +
															"border-radius: 10px;" +
															"margin-left: " + Math.round(windowWidth / 6) + "px;" +
															"margin-right: " + Math.round(windowWidth / 6) + "px;" +
															/*"padding: 5px;" +*/
															"text-align: center;";
		document.getElementById("main").appendChild(beatsBody);
		// Create beat divs https://stackoverflow.com/questions/5886144/create-divs-from-array-elements
		for(i = 1; i <= numBeats; i ++) {
			var newBeat = document.createElement('div');
			newBeat.id = "beat" + i;
			newBeat.style.cssText = beatcss;
			for(j = 0; j < noteNames.length; j ++) {
				var newNote = document.createElement("input");
				newNote.type = "checkBox";
				newNote.name = "beat1note";
				newNote.id = "beat" + i + noteNames[j];
				newNote.className = "note";
				newNote.addEventListener("click", beatCallback(i-1, j), false);
				//newNote.style.cssText = notecss;
				newBeat.appendChild(newNote);
				var noteLabel = document.createElement("label");
				noteLabel.htmlFor = "beat" + i + noteNames[j];
				newBeat.appendChild(noteLabel);
			}
			document.getElementById("beats").appendChild(newBeat);
			if(i == 4) {
				newBeat = document.createElement('div');
				newBeat.id = "break";
				newBeat.style.cssText = "width: " + Math.round(windowWidth / 75) + "px;" +
																"border-radius: 8px;" +
																"display: inline-block;";
				document.getElementById("beats").appendChild(newBeat);
			}
		}
	}
	
	function beatCallback (a, b) {
		return function() {
			playNotes[a][b] = !playNotes[a][b];
		};
	}
	
	function drawNewUser () {
		
	}
	
	function drawLogIn () {
		
	}
	
	function drawProfile () {
		
	}
	
</script>